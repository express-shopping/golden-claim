<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Golden Hamster | CEO Edition</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #f3ba2f; --bg: #000; --card: #1c1f24; --purple: #8e44ad; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Cairo', sans-serif; user-select: none; -webkit-tap-highlight-color: transparent; overflow: hidden; }
        
        /* Header Info */
        .top-stats { display: flex; justify-content: space-between; padding: 15px; align-items: center; background: rgba(0,0,0,0.8); }
        .user-info { display: flex; align-items: center; gap: 10px; }
        .user-info img { width: 35px; border-radius: 50%; border: 1px solid var(--gold); }
        .profit-box { background: #1a1a1a; padding: 5px 15px; border-radius: 20px; border: 1px solid #333; font-size: 12px; display: flex; align-items: center; gap: 8px; }

        /* Daily Reward Grid */
        .daily-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; padding: 10px 15px; }
        .daily-item { background: var(--card); border-radius: 12px; padding: 10px; text-align: center; border: 1px solid #2d333b; position: relative; }
        .daily-item small { color: #888; font-size: 10px; display: block; }
        .daily-item b { font-size: 11px; display: block; margin-top: 5px; }
        .check-mark { position: absolute; top: 5px; right: 5px; color: #2ecc71; font-size: 12px; }

        /* Balance */
        .balance-section { text-align: center; margin: 20px 0; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .balance-section img { width: 40px; }
        .balance-section h1 { font-size: 40px; margin: 0; font-weight: 900; }

        /* Main Hamster & Glow */
        .main-mining-area { position: relative; display: flex; justify-content: center; align-items: center; margin-top: 20px; }
        .glow-circle { width: 280px; height: 280px; border-radius: 50%; border: 10px solid var(--purple); position: relative; display: flex; justify-content: center; align-items: center; box-shadow: 0 0 30px var(--purple); overflow: hidden; }
        .hamster-img { width: 230px; cursor: pointer; transition: transform 0.1s; z-index: 2; }
        .hamster-img:active { transform: scale(0.95); }
        .timer-overlay { position: absolute; bottom: -30px; color: var(--gold); font-weight: 900; }

        /* Bottom Nav */
        .nav-bar { position: fixed; bottom: 0; width: 100%; height: 80px; background: rgba(20,20,20,0.95); display: flex; justify-content: space-around; padding-top: 10px; border-top: 1px solid #333; backdrop-filter: blur(10px); }
        .nav-item { text-align: center; color: #555; font-size: 11px; flex: 1; text-decoration: none; }
        .nav-item.active { color: #fff; }
        .nav-item i { font-size: 24px; display: block; margin-bottom: 5px; }
        .airdrop-icon { color: var(--gold) !important; }

        /* Pages */
        .page { display: none; padding: 20px; height: 80vh; overflow-y: auto; padding-bottom: 100px; }
        .page.active { display: block; }
    </style>
</head>
<body>

<div id="app">
    <div class="top-stats">
        <div class="user-info">
            <img src="https://cdn-icons-png.flaticon.com/512/6585/6585012.png">
            <div>
                <b id="username" style="font-size: 12px;">MUGAMMAD (CEO)</b><br>
                <small style="color: var(--gold);">Legendary ></small>
            </div>
        </div>
        <div class="profit-box">
            <img src="https://cdn-icons-png.flaticon.com/512/6585/6585012.png" width="15">
            <span>Profit per hour: <b style="color: #fff;" id="p-hour">+212.39K</b></span>
            <i style="color: #888;">âš™ï¸</i>
        </div>
    </div>

    <div class="daily-grid">
        <div class="daily-item"><span class="check-mark">âœ”ï¸</span>ğŸ“…<br><b>Daily reward</b><small>07:33</small></div>
        <div class="daily-item"><span class="check-mark">âœ”ï¸</span>ğŸ”‘<br><b>Daily cipher</b><small>02:33</small></div>
        <div class="daily-item">ğŸ<br><b>Daily combo</b><small>19:34</small></div>
    </div>

    <div id="exchange" class="page active">
        <div class="balance-section">
            <img src="https://cdn-icons-png.flaticon.com/512/6585/6585012.png">
            <h1 id="balance">0</h1>
        </div>
        <div class="main-mining-area">
            <div class="glow-circle">
                <img src="https://cdn-icons-png.flaticon.com/512/11427/11427103.png" class="hamster-img" onclick="mineAction()">
            </div>
            <div class="timer-overlay" id="timer">READY! âš¡</div>
        </div>
    </div>

    <div class="nav-bar">
        <div class="nav-item active" onclick="switchTab('exchange', this)"><i>ğŸ”„</i>Exchange</div>
        <div class="nav-item"><i>â›ï¸</i>Mine</div>
        <div class="nav-item"><i>ğŸ‘¥</i>Friends</div>
        <div class="nav-item"><i>ğŸ’°</i>Earn</div>
        <div class="nav-item airdrop-icon"><i>ğŸª™</i>Airdrop</div>
    </div>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // Firebase Config
    const firebaseConfig = {
        apiKey: "AIzaSyBzNnLCKo1Zn5XH602UGN8jPDX5kp9jsjA",
        authDomain: "goldenclaim-6863a.firebaseapp.com",
        databaseURL: "https://goldenclaim-6863a-default-rtdb.firebaseio.com",
        projectId: "goldenclaim-6863a",
        storageBucket: "goldenclaim-6863a.firebasestorage.app",
        messagingSenderId: "817930053370",
        appId: "1:817930053370:web:2e0a807e47c4a7ad868b43"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const uid = tg.initDataUnsafe.user?.id || "test_user";

    let u = { balance: 0, last: 0, power: 0.0001, profitHour: 212390 };

    function sync() {
        db.ref('users/' + uid).on('value', s => {
            if(s.exists()){
                u = s.val();
                document.getElementById('balance').innerText = Math.floor(u.balance).toLocaleString();
                document.getElementById('p-hour').innerText = `+${(u.profitHour / 1000).toFixed(2)}K`;
                updateTimer();
            }
            document.getElementById('username').innerText = (tg.initDataUnsafe.user?.first_name || "MUGAMMAD") + " (CEO)";
        });
    }

    function mineAction() {
        const now = Date.now();
        if (now - (u.last || 0) >= 300000) {
            db.ref('users/' + uid).update({
                balance: (u.balance || 0) + (u.power || 1000) + (u.profitHour / 12), // ØªØ¹Ø¯ÙŠÙ† ÙƒÙ„ 5 Ø¯Ù‚Ø§Ø¦Ù‚
                last: now
            });
            tg.HapticFeedback.impactOccurred('heavy');
        }
    }

    function updateTimer() {
        const rem = 300000 - (Date.now() - (u.last || 0));
        if (rem > 0) {
            const m = Math.floor(rem / 60000);
            const s = Math.floor((rem % 60000) / 1000);
            document.getElementById('timer').innerText = `${m}:${s < 10 ? '0'+s : s}`;
            setTimeout(updateTimer, 1000);
        } else {
            document.getElementById('timer').innerText = "READY! âš¡";
        }
    }

    function switchTab(id, el) {
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        el.classList.add('active');
        // Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø·Ù‚ ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„ÙØ¹Ù„ÙŠ
    }

    sync();
</script>
</body>
</html>

