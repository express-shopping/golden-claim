<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hamster Ultimate Pro</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #0b0e11;
            --card-bg: #1c1f24;
            --gold: #f3ba2f;
            --text-main: #ffffff;
            --text-sub: #848b94;
            --accent: #5d5fef;
        }

        body {
            margin: 0; padding: 0;
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Cairo', sans-serif;
            overflow: hidden;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* رأس الصفحة والمستوى */
        .user-header {
            padding: 15px; display: flex; justify-content: space-between; align-items: center;
        }
        .level-badge {
            background: linear-gradient(90deg, #f3ba2f, #bd931d);
            color: black; padding: 2px 10px; border-radius: 20px;
            font-size: 10px; font-weight: 900; margin-top: 4px; display: inline-block;
        }

        .header-icons { display: flex; gap: 15px; }
        .icon-btn { cursor: pointer; width: 24px; transition: 0.2s; }
        .icon-btn:hover { transform: scale(1.1); }

        /* الرصيد */
        .balance-section {
            text-align: center; margin: 15px 0;
        }
        .balance-section img { width: 40px; vertical-align: middle; }
        #balance { font-size: 40px; font-weight: 900; vertical-align: middle; }

        /* منطقة النقر وشريط الطاقة */
        .main-click-area {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            height: 40vh; position: relative;
        }
        .hamster-circle {
            width: 240px; height: 240px; border-radius: 50%;
            background: radial-gradient(circle, var(--gold) 0%, transparent 70%);
            display: flex; align-items: center; justify-content: center;
            position: relative; cursor: pointer;
        }
        .hamster-circle img {
            width: 210px; height: 210px; border-radius: 50%;
            border: 5px solid rgba(255,255,255,0.1);
            transition: transform 0.05s;
        }
        .hamster-circle:active img { transform: scale(0.92); }

        .energy-container {
            width: 80%; margin-top: 20px;
        }
        .energy-info { display: flex; justify-content: space-between; font-size: 13px; margin-bottom: 4px; }
        .energy-bar {
            width: 100%; height: 10px; background: #222; border-radius: 10px; overflow: hidden;
        }
        .energy-fill {
            width: 100%; height: 100%; background: linear-gradient(90deg, #f3ba2f, #ffea00);
            transition: width 0.3s;
        }

        /* المهام اليومية (7 أيام) */
        .daily-task-grid {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; padding: 10px;
        }
        .day-box {
            background: var(--card-bg); border-radius: 8px; padding: 8px 2px;
            text-align: center; border: 1px solid #333; font-size: 10px;
        }
        .day-box.active { border-color: var(--gold); background: #25282e; }
        .day-box.claimed { opacity: 0.5; background: #000; }

        /* الأزرار السفلية */
        .nav-bar {
            position: fixed; bottom: 0; width: 100%; background: #1c1f24;
            display: flex; justify-content: space-around; padding: 10px 0 25px;
            border-top: 1px solid #333;
        }
        .nav-item { text-align: center; color: var(--text-sub); font-size: 11px; flex: 1; cursor: pointer; }
        .nav-item.active { color: var(--gold); }
        .nav-item img { width: 22px; display: block; margin: 0 auto 4px; }

        /* نافذة منبثقة (Popups) */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 1000; padding: 20px; box-sizing: border-box;
        }
        .modal-content {
            background: var(--card-bg); border-radius: 20px; padding: 20px;
            margin-top: 50px; border: 1px solid var(--gold); position: relative;
        }
        .close-btn { position: absolute; top: 10px; left: 10px; color: white; font-size: 20px; cursor: pointer; }

        /* تأثير النقر */
        .tap-effect {
            position: absolute; color: white; font-weight: 900; font-size: 28px;
            pointer-events: none; animation: fly 0.6s ease-out forwards;
        }
        @keyframes fly {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-100px); }
        }
    </style>
</head>
<body>

    <div class="user-header">
        <div style="display: flex; gap: 10px; align-items: center;">
            <div id="user-avatar" style="width: 45px; height: 45px; border-radius: 12px; background: #333; border: 1px solid var(--gold); background-size: cover;"></div>
            <div>
                <div id="user-name" style="font-weight: bold; font-size: 14px;">CEO MUGAHED</div>
                <div class="level-badge" id="level-name">Bronze Level 1</div>
            </div>
        </div>
        <div class="header-icons">
            <img src="https://img.icons8.com/ios-filled/50/f3ba2f/settings.png" class="icon-btn" onclick="toggleModal('settings-modal')">
            <img src="https://img.icons8.com/fluency/48/wallet.png" class="icon-btn" onclick="toggleModal('wallet-modal')">
        </div>
    </div>

    <div class="balance-section">
        <img src="https://cdn-icons-png.flaticon.com/512/6585/6585012.png">
        <span id="balance">0</span>
    </div>

    <div class="main-click-area">
        <div class="hamster-circle" id="tap-target">
            <img src="https://img.freepik.com/premium-photo/cute-hamster-businessman-suit-generative-ai_955925-45.png" id="hamster-img">
        </div>
        
        <div class="energy-container">
            <div class="energy-info">
                <span>⚡ الطاقة</span>
                <span><span id="cur-energy">1000</span> / 1000</span>
            </div>
            <div class="energy-bar">
                <div class="energy-fill" id="energy-fill"></div>
            </div>
        </div>
    </div>

    <div style="padding: 0 15px; margin-top: 10px;">
        <div style="font-size: 12px; margin-bottom: 5px; color: var(--gold);">المكافأة اليومية (7 أيام)</div>
        <div class="daily-task-grid" id="daily-grid">
            </div>
    </div>

    <div class="nav-bar">
        <div class="nav-item active" onclick="alert('أنت في الواجهة الرئيسية')">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/coins.png">الرئيسية
        </div>
        <div class="nav-item" onclick="alert('نظام التعدين قيد التطوير')">
            <img src="https://img.icons8.com/ios-filled/50/848b94/pick-axe.png">تعدين
        </div>
        <div class="nav-item" onclick="alert('رابط الدعوة: t.me/YourBot?start=ref')">
            <img src="https://img.icons8.com/ios-filled/50/848b94/group.png">الأصدقاء
        </div>
    </div>

    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="toggleModal('settings-modal')">✖</span>
            <h3 style="text-align: center;">الإعدادات</h3>
            <div style="padding: 10px;">
                <p>اللغة: العربية</p>
                <p>الاهتزاز: مفعل ✅</p>
                <button style="width: 100%; padding: 10px; background: #e74c3c; border: none; color: white; border-radius: 10px;">تسجيل الخروج</button>
            </div>
        </div>
    </div>

    <div id="wallet-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="toggleModal('wallet-modal')">✖</span>
            <h3 style="text-align: center;">المحفظة الرقمية</h3>
            <div style="text-align: center; padding: 20px;">
                <img src="https://img.icons8.com/fluency/96/wallet.png" width="60">
                <p>قم بربط محفظة TON لاستلام الأيردروب</p>
                <button style="background: #007aff; color: white; border: none; padding: 12px 25px; border-radius: 12px; font-weight: bold;">Connect TON Wallet</button>
            </div>
        </div>
    </div>

    <script>
        let balance = 0;
        let energy = 1000;
        let maxEnergy = 1000;
        let currentDay = 1;

        // نظام الليفل
        const levels = [
            { name: "Bronze", min: 0 },
            { name: "Silver", min: 5000 },
            { name: "Gold", min: 25000 },
            { name: "Platinum", min: 100000 },
            { name: "Diamond", min: 1000000 }
        ];

        function updateLevel() {
            let currentLevel = levels[0];
            for (let l of levels) {
                if (balance >= l.min) currentLevel = l;
            }
            document.getElementById('level-name').innerText = `${currentLevel.name} - Level ${Math.floor(balance/1000) + 1}`;
        }

        // معالجة النقر
        const tapTarget = document.getElementById('tap-target');
        tapTarget.addEventListener('touchstart', (e) => {
            e.preventDefault(); // لمنع التكبير الافتراضي
            if (energy >= 1) {
                balance += 1;
                energy -= 1;
                showTapEffect(e.touches[0].clientX, e.touches[0].clientY);
                updateUI();
                if (window.Telegram.WebApp.HapticFeedback) window.Telegram.WebApp.HapticFeedback.impactOccurred('medium');
            }
        });

        function showTapEffect(x, y) {
            const effect = document.createElement('div');
            effect.className = 'tap-effect';
            effect.innerText = '+1';
            effect.style.left = `${x}px`;
            effect.style.top = `${y}px`;
            document.body.appendChild(effect);
            setTimeout(() => effect.remove(), 600);
        }

        function updateUI() {
            document.getElementById('balance').innerText = Math.floor(balance).toLocaleString();
            document.getElementById('cur-energy').innerText = energy;
            document.getElementById('energy-fill').style.width = (energy / maxEnergy * 100) + "%";
            updateLevel();
        }

        // شحن الطاقة تلقائياً
        setInterval(() => {
            if (energy < maxEnergy) {
                energy += 2;
                updateUI();
            }
        }, 1500);

        // نظام المهام اليومية (7 أيام)
        function initDailyTasks() {
            const grid = document.getElementById('daily-grid');
            grid.innerHTML = '';
            for (let i = 1; i <= 7; i++) {
                let reward = i * 100;
                let box = document.createElement('div');
                box.className = `day-box ${i === currentDay ? 'active' : ''}`;
                box.innerHTML = `اليوم ${i}<br><b>${reward}</b>`;
                box.onclick = () => claimDay(i, reward);
                grid.appendChild(box);
            }
        }

        function claimDay(day, amount) {
            if (day === currentDay) {
                balance += amount;
                alert(`مبروك! حصلت على ${amount} عملة مكافأة اليوم ${day}`);
                currentDay++;
                initDailyTasks();
                updateUI();
            } else if (day < currentDay) {
                alert("تم استلام هذه المكافأة بالفعل!");
            } else {
                alert("عذراً، انتظر لليوم القادم!");
            }
        }

        // فتح وإغلاق النوافذ
        function toggleModal(id) {
            const m = document.getElementById(id);
            m.style.display = (m.style.display === 'block') ? 'none' : 'block';
        }

        // جلب بيانات تليجرام
        const tg = window.Telegram.WebApp;
        tg.expand();
        if (tg.initDataUnsafe.user) {
            document.getElementById('user-name').innerText = tg.initDataUnsafe.user.first_name;
            if (tg.initDataUnsafe.user.photo_url) {
                document.getElementById('user-avatar').style.backgroundImage = `url('${tg.initDataUnsafe.user.photo_url}')`;
            }
        }

        // تشغيل أولي
        initDailyTasks();
        updateUI();

    </script>
</body>
</html>

